{"mappings":"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","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  FirstDelay: document.querySelector(\"input[name='delay']\"),\n  delayStep: document.querySelector(\"input[name='step']\"),\n  amount: document.querySelector(\"input[name='amount']\"),\n  btnSubmit: document.querySelector('button'),\n};\nrefs.form.addEventListener('input', getValueForm);\nrefs.btnSubmit.addEventListener('click', open);\nconst STORAGE_KEY_DELAY = 'promise-delay';\nconst STORAGE_KEY_STEP = 'promise-step';\nconst STORAGE_KEY_AMOUNT = 'promise-amount';\nlet startId = null;\nlet count = 0;\nreloadedPage();\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  //const DALAY = 1000;\n  return new Promise((resolve, reject) => {\n    //setTimeout(() => {\n    if (shouldResolve) {\n      resolve({ position: `${position}`, delay: `${delay}` }); // Fulfill\n    } else {\n      reject({ position: `${position}`, delay: `${delay}` }); // Reject\n    }\n    //}, DALAY);\n  });\n}\n\nfunction open(evt) {\n  evt.preventDefault();\n\n  if (\n    localStorage.getItem(STORAGE_KEY_DELAY) === null &&\n    localStorage.getItem(STORAGE_KEY_STEP) === null &&\n    localStorage.getItem(STORAGE_KEY_AMOUNT) === null\n  ) {\n    Notify.warning('Всі поля форми повинні бути заповнені', {\n      position: 'center-top',\n      timeout: 1250,\n      fontSize: '20px',\n      distance: '150px',\n      borderRadius: '25px',\n      failure: {\n        textColor: '#ааа',\n      },\n    });\n    return;\n  }\n\n  let delayTime = Number(JSON.parse(localStorage.getItem(STORAGE_KEY_DELAY)));\n  startId = setTimeout(\n    start,\n    Number(JSON.parse(localStorage.getItem(STORAGE_KEY_DELAY))),\n    delayTime\n  );\n  clearTextForm();\n}\n\nfunction start(delayTime) {\n  if (count < Number(JSON.parse(localStorage.getItem(STORAGE_KEY_AMOUNT)))) {\n    count += 1;\n    createPromise(count, delayTime)\n      .then(({ position, delay }) => {\n        Notify.success(`✅ Fulfilled promise ${position} in ${delay} ms`, {\n          position: 'center-top',\n          timeout: 3000,\n          fontSize: '16px',\n          distance: '150px',\n          borderRadius: '15px',\n          failure: {\n            textColor: '#ааа',\n          },\n        });\n        console.log(`✅ Fulfilled promise ${position} in ${delay} ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notify.failure(`❌ Rejected promise ${position} in ${delay} ms`, {\n          position: 'center-top',\n          timeout: 3000,\n          fontSize: '16px',\n          distance: '150px',\n          borderRadius: '15px',\n          failure: {\n            textColor: '#ааа',\n          },\n        });\n        console.log(`❌ Rejected promise ${position} in ${delay} ms`);\n      });\n    delayTime += Number(JSON.parse(localStorage.getItem(STORAGE_KEY_STEP)));\n\n    startId = setTimeout(start, delayTime, delayTime);\n  } else {\n    clearInterval(startId);\n    localStorage.removeItem(STORAGE_KEY_DELAY);\n    localStorage.removeItem(STORAGE_KEY_STEP);\n    localStorage.removeItem(STORAGE_KEY_AMOUNT);\n    count = 0;\n    delayTime = 0;\n  }\n}\n\nfunction clearTextForm() {\n  refs.FirstDelay.value = '';\n  refs.delayStep.value = '';\n  refs.amount.value = '';\n}\n\nfunction getValueForm(event) {\n  const {\n    elements: { delay, step, amount },\n  } = event.currentTarget;\n  const delayForm = delay.value;\n  const stepForm = step.value;\n  const amountForm = amount.value;\n  if (delayForm !== '' && stepForm !== '' && amountForm !== '') {\n    localStorage.setItem(STORAGE_KEY_DELAY, JSON.stringify(delayForm));\n    localStorage.setItem(STORAGE_KEY_STEP, JSON.stringify(stepForm));\n    localStorage.setItem(STORAGE_KEY_AMOUNT, JSON.stringify(amountForm));\n  }\n}\n\nfunction reloadedPage() {\n  localStorage.removeItem(STORAGE_KEY_DELAY);\n  localStorage.removeItem(STORAGE_KEY_STEP);\n  localStorage.removeItem(STORAGE_KEY_AMOUNT);\n}\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$refs","form","document","querySelector","FirstDelay","delayStep","amount","btnSubmit","addEventListener","event","_elements","currentTarget","elements","delay","step","delayForm","value","stepForm","amountForm","localStorage","setItem","$ce04d3a99e08e73b$var$STORAGE_KEY_DELAY","JSON","stringify","$ce04d3a99e08e73b$var$STORAGE_KEY_STEP","$ce04d3a99e08e73b$var$STORAGE_KEY_AMOUNT","evt","preventDefault","getItem","Notify","warning","position","timeout","fontSize","distance","borderRadius","failure","textColor","delayTime","Number","parse","$ce04d3a99e08e73b$var$startId","setTimeout","$ce04d3a99e08e73b$var$start","$ce04d3a99e08e73b$var$count","shouldResolve","Math","random","Promise","resolve","reject","concat","then","param","success","console","log","catch","clearInterval","removeItem"],"version":3,"file":"03-promises.f68fe322.js.map"}